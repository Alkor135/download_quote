# Загрузка биржевых котировок с сайта ФИНАМа.  
Python 3.13

[rts_finam_downloader_tick_to_zip_csv.py](rts_finam_downloader_tick_to_zip_csv.py) - 
качает тиковые котировки на фьючерс RTS c Финама.
Преобразует дату и время, добавляя миллисекунды для уникальности. 
Также, удаляет дубликаты, если добавление миллисекунд не помогло 
(более 999 на один тик (в вечерний клиринг)). 
Сохраняет данные за каждый день в заархивированный (zip) файл csv. 
Объем загруженных данных за 10 лет, составляет около 1,8 Gb.  

### Настраиваемые параметры
1. `dir_data` - путь до целевой папки, куда будут складываться скаченные файлы.
2. `ticker` - тикер.
3. `period` - период от тиков до часов. Дневной период и выше не поддерживается, т.к.
один файл соответствует одному дню.  
period: int =  
Выбор из: 'tick': 1, 'min': 2, '5min': 3, '10min': 4, '15min': 5, '30min': 6, 'hour': 7
4. `market` - маркет (акции/фьючерсы)
5. `daft` - формат данных.  
datf - Формат получения данных  
datf = 1 'TICKER, PER, DATE, TIME, OPEN, HIGH, LOW, CLOSE, VOL'  
datf = 2 'TICKER, PER, DATE, TIME, OPEN, HIGH, LOW, CLOSE'  
datf = 3 'TICKER, PER, DATE, TIME, CLOSE, VOL'  
datf = 4 'TICKER, PER, DATE, TIME, CLOSE',  
datf = 5 'DATE, TIME, OPEN, HIGH, LOW, CLOSE, VOL',  
datf = 6 'TICKER, PER, DATE, TIME, LAST, VOL',  
datf = 7 'TICKER, DATE, TIME, LAST, VOL'  
datf = 8 'TICKER, DATE, TIME, LAST',  
datf = 9 'DATE, TIME, LAST, VOL',  
datf = 10 'DATE, TIME, LAST',  
datf = 11 'DATE, TIME, LAST, VOL, ID'  
6. `start_date_range` - Дата начиная с которой качать котировки
7. `end_date_range` - Дата по которую качать котировки (включительно)


[settings.py](settings.py) - 
файл settings.py содержит данные в основном по акциям Московской биржи (MOEX).
Проверьте наличие тикера в файле settings.py!!!  
Если вашего тикера там нет, то добавьте его. ID можно узнать на сайте ФИНАМа.  
Можно добавлять как акции, так и фьючерсы.  
[rts_erase_zero_file_csv.py](rts_erase_zero_file_csv.py) 
После закачки, в целевой папке будут и файлы с нулевым размером (не для zip файлов). 
Это файлы за выходные или праздничные дни, когда торги на бирже не велись. 
Чтобы очистить целевую папку от пустых файлов, запустите erase_zero_files.py.  
Перед запуском очистки пропишите путь к целевой папке.  
Переменная `path_storage`
## Изменения
Теперь запрос к серверу Финама включает в себя заголовок, чтобы сервер думал, 
что к нему обращается браузер.